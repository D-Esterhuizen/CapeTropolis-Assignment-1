@model List<u23668475_HW01.Models.Room>
@{
    ViewBag.Title = "CapeHiveBooking";
}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>

</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6 text-center mb-2">
                <h2>
                    &commat;CapeHive
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-tsunami" viewBox="0 0 16 16">
                    <path d="M.036 12.314a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.757-.703a.5.5 0 0 1-.278-.65m0 2a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.757-.703a.5.5 0 0 1-.278-.65M2.662 8.08c-.456 1.063-.994 2.098-1.842 2.804a.5.5 0 0 1-.64-.768c.652-.544 1.114-1.384 1.564-2.43.14-.328.281-.68.427-1.044.302-.754.624-1.559 1.01-2.308C3.763 3.2 4.528 2.105 5.7 1.299 6.877.49 8.418 0 10.5 0c1.463 0 2.511.4 3.179 1.058.67.66.893 1.518.819 2.302-.074.771-.441 1.516-1.02 1.965a1.88 1.88 0 0 1-1.904.27c-.65.642-.907 1.679-.71 2.614C11.076 9.215 11.784 10 13 10h2.5a.5.5 0 0 1 0 1H13c-1.784 0-2.826-1.215-3.114-2.585-.232-1.1.005-2.373.758-3.284L10.5 5.06l-.777.388a.5.5 0 0 1-.447 0l-1-.5a.5.5 0 0 1 .447-.894l.777.388.776-.388a.5.5 0 0 1 .447 0l1 .5.034.018c.44.264.81.195 1.108-.036.328-.255.586-.729.637-1.27.05-.529-.1-1.076-.525-1.495s-1.19-.77-2.477-.77c-1.918 0-3.252.448-4.232 1.123C5.283 2.8 4.61 3.738 4.07 4.79c-.365.71-.655 1.433-.945 2.16-.15.376-.301.753-.463 1.13" />
                </svg>
                </h2>

            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <form id="bookingForm">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="BfirstName">First Name</label>
                            <input type="text" class="form-control" id="BfirstName" placeholder="First Name" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="Bsurname">Surname</label>
                            <input type="text" class="form-control" id="Bsurname" placeholder="Surname" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="Binitials">Initials</label>
                            <input type="text" class="form-control" id="Binitials" placeholder="Initials" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="Bemail">Email</label>
                            <input type="email" class="form-control" id="Bemail" placeholder="Email" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Baddress">Address</label>
                        <input type="text" class="form-control" id="Baddress" placeholder="Address" required>
                    </div>
                    <div class="form-group">
                        <label for="Btelephone">Telephone Number</label>
                        <input type="tel" class="form-control" id="Btelephone" placeholder="Telephone Number" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="Bdob">Date of Birth</label>
                            <input type="date" class="form-control" id="Bdob" placeholder="Date of Birth" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="BidType">Identification Type</label>
                            <select class="form-control" id="BidType">
                                <option selected>ID Type</option>
                                <option value="1">RSA ID Number</option>
                                <option value="2">Passport Number</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="BidNumber">ID Number</label>
                        <input type="text" class="form-control" id="BidNumber" placeholder="ID Number" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="BroomType">Room Type</label>
                            <select class="form-control" id="BroomType">
                                <option selected>Room Type</option>
                                @foreach (var r in Model)
                                {
                                    <option value="@r.RoomID" data-price="@r.PricPN" data-features="@r.Features">@r.RoomType</option>
                                }
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="BroomPrice">Price per night</label>
                            <input type="text" class="form-control" id="BroomPrice" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="BroomFeatures">Room Features</label>
                        <textarea class="form-control" id="BroomFeatures" readonly rows="3"></textarea>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="BmealReq">Meal Requirements</label>
                        <select class="form-control" id="BmealReq">
                            <option selected>Meal Requirements</option>
                            @foreach (var r in Model)
                            {
                                <option value="@r." data-price="@r.PricPN" data-features="@r.Features">@r.RoomType</option>
                            }
                        </select>
                    </div>
                    <div class=" form-group col-md-6">
                        <label for="guestCountInput">Number of Guests(Max 4 Per Room):</label>
                        <input class=" form-control" type="number" id="guestCountInput" min="0" max="4" value="0" required />
                    </div>
                    <div style="margin-top: 30px;">
                        <button type="submit" class="btn btn-outline-dark" id="SubmitBooking">Confirm Booking</button>
                    </div>
                </form>
            </div>
            <div class="col-md-6">
                <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>

                    <div class="carousel-inner mt-1 vh-100 overflow-hidden">
                        <div class="carousel-item active rounded">
                            <img src="~/Images/IMG 6.jpeg" class="d-block w-100 h-100 object-fit-cover" alt="dev 1">
                        </div>
                        <div class="carousel-item rounded">
                            <img src="~/Images/IMG 7.jpg" class="d-block w-100 h-100 object-fit-cover" alt="dev 2">
                        </div>
                        <div class="carousel-item rounded">
                            <img src="~/Images/MG_0649.jpg" class="d-block w-100 h-100 object-fit-cover" alt="dev 3">
                        </div>
                    </div>

                    <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function () {
        $('#BroomType').change(function () {
            var selectedOption = $(this).find('option:selected');
            var price = selectedOption.data('price');
            var features = selectedOption.data('features');
            $('#BroomPrice').val("R" + price);
            $('#BroomFeatures').val(features);
        });

        $('#bookingForm').submit(function (e) {
            e.preventDefault();

            var BookingDetails = {
                Date: GetDate(),
                BookingId: generateGUID(),
                Hotel: 'CapeHive',
                BFirstName: $('#BfirstName').val(),
                BSurname: $('#Bsurname').val(),
                BInitials: $('#Binitials').val(),
                BEmail: $('#Bemail').val(),
                BAddress: $('#Baddress').val(),
                BTelephoneNumber: $('#Btelephone').val(),
                BIdType: $('#BidType').val(),
                BIdNumber: $('#BidNumber').val(),
                BRoomType: $('#BroomType').val(),
                BRoomPrice: $('#BroomPrice').val(),
                BRoomFeatures: $('#BroomFeatures').val(),
                BDOB: $('#Bdob').val(),
                BGuestCount: $('#guestCountInput').val()
            };

            var Booking = JSON.parse(localStorage.getItem('BookingData')) || [];
            Booking.push(BookingDetails);
            localStorage.setItem('BookingData', JSON.stringify(Booking));

            // Reset the form fields
            $('#bookingForm')[0].reset();
            $('#BroomPrice').val('');
            $('#BroomFeatures').val('');


            window.location.href = '@Url.Action("BookingConfirmation", "Home")';
        });
    });

    function GetDate() {
        var TimeStamp = new Date();
        var BetterDate = TimeStamp.toLocaleString();

        return BetterDate;
    }
    function generateGUID() {

        const timestamp = Date.now().toString(16); // Convert current timestamp to hexadecimal
        const random = Math.random().toString(16).substr(2, 6); // Generate random number and convert to hexadecimal

        // Combine timestamp and random number to form the UID
        return timestamp + random;
    }

    </script>
</body>